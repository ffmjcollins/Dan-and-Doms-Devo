<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4D - Dad and Dom's Daily Devo</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="logo">
                <h1>4D</h1>
                <p>Dad and Dom's Daily Devo</p>
            </div>
            <div class="login-box">
                <h2>Welcome!</h2>
                <p>Enter the family code to begin</p>
                <input type="password" id="password-input" placeholder="Family Code" onkeypress="if(event.key==='Enter') login()" />
                <button onclick="login()">Enter</button>
            </div>
        </div>
    </div>

    <!-- Name Selection Screen -->
    <div id="name-screen" class="screen">
        <div class="name-container">
            <h2>Who's joining today?</h2>
            <div class="name-buttons">
                <button class="name-btn" onclick="selectUser('Dad')">
                    <span class="emoji">üë®‚Äçüë¶</span>
                    <span>Dad</span>
                </button>
                <button class="name-btn" onclick="selectUser('Dom')">
                    <span class="emoji">üé£</span>
                    <span>Dom</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="app-screen" class="screen">
        <!-- Header -->
        <header>
            <div class="header-content">
                <h1>4D</h1>
                <div class="user-info">
                    <span id="current-user"></span>
                    <button class="logout-btn" onclick="logout()">Logout</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="tab active" onclick="showTab('today')">Today</button>
            <button class="tab" onclick="showTab('calendar')">Calendar</button>
            <button class="tab" onclick="showTab('progress')">Progress</button>
        </nav>

        <!-- Today Tab -->
        <div id="today-tab" class="tab-content active">
            <div class="devotion-container">
                <div class="week-badge" id="week-badge"></div>
                <h2 class="devotion-title" id="devotion-title"></h2>
                <p class="devotion-subtitle" id="devotion-subtitle"></p>
                
                <!-- Video Section -->
                <div class="video-section" id="video-section"></div>

                <!-- Scripture Section -->
                <div class="section">
                    <h3>üìñ Scripture</h3>
                    <p class="context" id="scripture-context"></p>
                    <div class="scripture-box" id="scripture-box"></div>
                </div>

                <!-- Reflection Section -->
                <div class="section">
                    <h3>üí≠ The Real Talk</h3>
                    <div id="reflection-content"></div>
                </div>

                <!-- Questions Section -->
                <div class="section">
                    <h3>‚ùì Talk About It</h3>
                    <div id="questions-content"></div>
                </div>

                <!-- Shared Journal Section -->
                <div class="section journal-section">
                    <h3>‚úçÔ∏è Our Journal</h3>
                    <div class="journal-entries" id="journal-entries">
                        <div class="loading">Loading notes...</div>
                    </div>
                    <div class="journal-input">
                        <textarea id="my-note" placeholder="Write your thoughts..."></textarea>
                        <button onclick="saveNote()">Save My Note</button>
                    </div>
                </div>

                <!-- Mark Complete -->
                <div class="complete-section">
                    <button class="complete-btn" id="complete-btn" onclick="markComplete()">
                        ‚úì Mark Complete
                    </button>
                </div>

                <!-- Navigation Arrows -->
                <div class="day-navigation">
                    <button onclick="previousDay()" id="prev-btn">‚Üê Previous</button>
                    <span id="day-indicator"></span>
                    <button onclick="nextDay()" id="next-btn">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div id="calendar-tab" class="tab-content">
            <div class="calendar-container">
                <h2>December 2024</h2>
                <p class="theme-text">Ordinary Guys, Extraordinary God</p>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
        </div>

        <!-- Progress Tab -->
        <div id="progress-tab" class="tab-content">
            <div class="progress-container">
                <h2>Your Progress</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="dad-completed">0</div>
                        <div class="stat-label">Dad's Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="dom-completed">0</div>
                        <div class="stat-label">Dom's Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="together-count">0</div>
                        <div class="stat-label">Done Together</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="streak-count">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                </div>
                <div class="week-progress" id="week-progress"></div>
            </div>
        </div>
    </div>

    <script src="devotions.js"></script>
    <script src="app.js"></script>
</body>
</html>
